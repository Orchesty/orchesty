version: '3.3'
services:
  1-mag-cus:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 1-mag-cus'
  2-xml-par:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 2-xml-par'
  3-map-1:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 3-map-1'
  4-mai:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 4-mai'
  5-ftp:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 5-ftp'
  6-api:
    image: 'dkr.hanaboso.net/pipes/pipes/pf-bridge:dev'
    working_dir: ''
    user: ''
    environment:
      RABBITMQ_HOST: rabbitmq
      RABBITMQ_PORT: '5672'
      RABBITMQ_USER: guest
      RABBITMQ_PASS: guest
      RABBITMQ_VHOST: /
    networks:
      - demo_default
    configs:
      - { source: cc_config, target: /srv/app/topology/topology.json }
    command: './dist/src/bin/pipes.js start bridge --id 6-api'
networks:
  demo_default:
    external: true
