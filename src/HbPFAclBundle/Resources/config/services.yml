services:
    _defaults:
        public: '%public.services%'

    hbpf.acl.provider.database:
        class: Hanaboso\PipesFramework\Acl\Provider\Impl\DatabaseProvider
        arguments:
            - '@hbpf.database_manager_locator.user'
            - '@hbpf.user.provider.resource'

    hbpf.factory.rule:
        class: Hanaboso\PipesFramework\Acl\Factory\RuleFactory
        arguments:
            - '@hbpf.database_manager_locator.user'
            - '%acl_rule%'
            - '%resource_enum%'

    hbpf.access.manager:
        class: Hanaboso\PipesFramework\Acl\Manager\AccessManager
        arguments:
            - '@hbpf.database_manager_locator.user'
            - '@hbpf.factory.rule'
            - '@hbpf.acl.provider.database'
            - '@hbpf.user.provider.resource'
            - '%resource_enum%'
        tags:
            - { name: kernel.event_subscriber }

    hbpf.manager.user:
        class: Hanaboso\PipesFramework\Acl\Manager\UserManager
        arguments:
            - '@hbpf.access.manager'
        tags:
            - { name: kernel.event_subscriber }
