monolog:
    use_microseconds: false
    channels: [authorization, commons, connector, mailer, parser_table, user, rabbit-mq, test]
    handlers:
        authorization:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/authorization_%kernel.environment%.log'
            level: info
            max_files: 10
        commons:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/commons_%kernel.environment%.log'
            level: info
            max_files: 10
        connector:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/connector_%kernel.environment%.log'
            level: info
            max_files: 10
        mailer:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/mailer_%kernel.environment%.log'
            level: info
            max_files: 10
        parser_table:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/parser_table_%kernel.environment%.log'
            level: info
            max_files: 10
        user:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/user_%kernel.environment%.log'
            level: info
            max_files: 10
        rabbit-mq:
            type: '%logger_handler%'
            path: '%kernel.logs_dir%/rabbit-mq_%kernel.environment%.log'
            level: info
            max_files: 10
            channels: rabbit-mq

        test:
            type: group
            members: [file_handler]
            channels: test

        # Commons handlers
        stdout_handler:
            type:  stream
            path:  "php://stdout"
            level: info
            formatter: logstash_formatter

        syslog_handler:
            type: syslog
            level: info

        file_handler:
            type: rotating_file
            path: '%kernel.logs_dir%/test_%kernel.environment%.log'
            level: info
            max_files: 10

services:
    logstash_formatter:
        class: Hanaboso\PipesFramework\Commons\Monolog\LogstashFormatter
        arguments:
            - 'asdasd'

