monolog:
    use_microseconds: false
    channels: [authorization, commons, connector, ftp, mailer, parser_table, user, rabbit-mq, test, stdout]
    handlers:
        authorization:
            type: service
            id: udp_handler
            level: info
        commons:
            type: service
            id: udp_handler
            level: info
        connector:
            type: service
            id: udp_handler
            level: info
        ftp:
            type: service
            id: udp_handler
            level: info
        mailer:
            type: service
            id: udp_handler
            level: info
        parser_table:
            type: service
            id: udp_handler
            level: info
        user:
            type: service
            id: udp_handler
            level: info
        rabbit-mq:
            type: service
            id: udp_handler
            level: info

        # Handler for docker container
        stdout:
            type:  stream
            path:  "%stdout_path%"
            level: info
            formatter: logstash_formatter
            max_files: 10

services:
    logstash_formatter:
        class: Hanaboso\PipesFramework\Commons\Monolog\LogstashFormatter

    udp_sender:
        class: Hanaboso\PipesFramework\Commons\Metrics\UDPSender
        arguments:
            - 'logstash'
            - '5120'

    udp_handler:
        class: Hanaboso\PipesFramework\Commons\Monolog\UdpHandler
        arguments:
            - '@udp_sender'
            - 'info'
        calls:
            - ['setFormatter', ['@logstash_formatter']]

